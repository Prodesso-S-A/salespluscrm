<style>
    .table-header-rotated {
        border-collapse: collapse;
    }

    .table-header-rotated td {
        width: 30px;
    }

    .table-header-rotated th {
        padding: 5px 10px;
    }

    .table-header-rotated td {
        text-align: center;
        padding: 10px 5px;
        border: 1px solid #ccc;
    }

    .ancho-columna {
        width: 5%;
    }

    .table-header-rotated th.rotate {
        height: 140px;
        white-space: nowrap;
    }

    .table-header-rotated th.rotate>div {
        -webkit-transform: translate(25px, 51px) rotate(315deg);
        -ms-transform: translate(25px, 51px) rotate(315deg);
        transform: translate(25px, 51px) rotate(315deg);
        width: 30px;
    }

    .table-header-rotated th.rotate>div>span {
        border-bottom: 1px solid #ccc;
        padding: 5px 10px;
    }

    .table-header-rotated th.row-header {
        padding: 0 10px;
        border-bottom: 1px solid #ccc;
    }

    tr.hide-table-padding td {
        padding: 0;
    }

    .expand-button {
        position: relative;
    }

    .accordion-toggle .expand-button:after {
        position: absolute;
        left: .75rem;
        top: 50%;
        transform: translate(0, -50%);
        content: '-';
    }

    .accordion-toggle.collapsed .expand-button:after {
        content: '+';
    }
</style>
<div class="content-body">
    <div class="container-fluid mt-3">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Roles</h4>
                <div class="button-icon">
                    <button type="button" class="btn mb-1 btn-primary" data-toggle="modal"
                        data-target=".add-user">Agregar<span class="btn-icon-right"><i class="icon-plus"></i></span>
                    </button>
                    <div class="modal fade add-user" tabindex="-1" role="dialog" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">AÃ±adir rol</h5>
                                    <button type="button" class="close" data-dismiss="modal"><span>&times;</span>
                                    </button>
                                </div>
                                <div class="login-form-bg h-100">
                                    <div class="container h-100">
                                        <div class="row justify-content-center h-100">
                                            <div class="col-xl-12">
                                                <div class="form-input-content">
                                                    <div class="card login-form mb-0">
                                                        <div class="card-body pt-5">
                                                            <form action="/rol" method="POST">
                                                                <div class="form-group">
                                                                    <label for="nombre">Nombre del Rol</label>
                                                                    <input type="text" value="{{nombre}}" name="nombre"
                                                                        class="form-control" id="nombre"
                                                                        placeholder="Escribe el nombre del Rol">
                                                                </div>
                                                                <div class="form-group">
                                                                    <table id="tblPermisos"
                                                                        class="table-header-rotated">
                                                                        <thead>
                                                                            <tr>
                                                                                <th></th>
                                                                                {{#each permiso}}
                                                                                <th class="rotate">
                                                                                    <div><span>{{Nombre}}</span></div>
                                                                                </th>
                                                                                {{/each}}
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            {{#each modulo}}
                                                                            <tr>
                                                                                <th class="row-header">{{this.Nombre}}
                                                                                </th>
                                                                                {{#each ../permiso}}
                                                                                <td>
                                                                                    <input
                                                                                        name="{{this.Nombre}}|{{../this.Nombre}}"
                                                                                        type="checkbox">
                                                                                </td>
                                                                                {{/each}}
                                                                            </tr>
                                                                            {{/each}}
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <button type="submit"
                                                                        class="btn login-form__btn submit w-100">Crear
                                                                        Rol</button>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="table-responsive">
                        <table class="table zero-configuration">
                            <thead>
                                <tr>
                                    <th class="ancho-columna"></th>
                                    <th>Rol</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each rol}}
                                <tr class="accordion-toggle collapsed" id="accordion1" data-toggle="collapse"
                                    data-parent="#{{nombre}}" href="#{{nombre}}">
                                    <td class="expand-button"></td>
                                    <td>{{nombre}}</td>
                                </tr>
                                <tr class="hide-table-padding">
                                    <td></td>
                                    <td>
                                        <div id="{{nombre}}" class="collapse in p-3">
                                            <div class="row">
                                                <div class="col-4">
                                                    <table class="table-header-rotated">
                                                        <thead>
                                                            <tr>
                                                                <th></th>
                                                                {{#each ../permiso}}
                                                                <th class="rotate">
                                                                    <div><span>{{Nombre}}</span></div>
                                                                </th>
                                                                {{/each}}
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {{#each ../modulo}}
                                                            <tr>
                                                                <th class="row-header">{{this.Nombre}}</th>
                                                                {{#each ../../permiso}}
                                                                <td>
                                                                    {{#each ../../Permisos}}
                                                                    {{#ifCond this.idModulo ../../this._id}}
                                                                    {{#ifCond this.idtipoPermiso ../this._id}}
                                                                        <i class="fa fa-check-circle-o	"></i>
                                                                    {{/ifCond}}
                                                                    {{/ifCond}}
                                                                    {{/each}}
                                                                </td>
                                                                {{/each}}
                                                            </tr>
                                                            {{/each}}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- #/ container -->
</div>